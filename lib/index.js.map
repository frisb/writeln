{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["let chalk = require('chalk');\nlet debug = require('debug');\nlet util = require('util');\n\nconst color = {\n\tblack :   0,\n\tred :     1,\n\tgreen :   2,\n\tyellow :  3,\n\tblue :    4,\n\tmagenta : 5,\n\tcyan :    6,\n\twhite :   7\n};\n\ndebug.colors.forEach(function (num, index) {\n\t// remove red\n\tif (num === color.red)\n\t\tdebug.colors.splice(index, 1);\n});\n\ndebug.enable('error warn info debug');\n\nfunction pad(num, len, char) {\n\tif (typeof(num) !== 'string') num = `${num}`;\n\tif (!len) len = 2;\n\tif (num.length >= len)\n\t\treturn num;\n\n\tlet padding = '';\n\n\tlen = len - num.length;\n\tfor (let i = 0; i < len; i++) {\n\t\tpadding += char || '0';\n\t}\n\n\treturn `${padding}${num}`;\n}\n\nfunction dateStr(date, delimiter) {\n\tif (!delimiter)\n\t\tdelimiter = '.';\n\n\treturn date.getFullYear() + delimiter + pad(date.getMonth() + 1) + delimiter + pad(date.getDate());\n}\n\nfunction timeStr(date, delimiter) {\n\tif (!delimiter)\n\t\tdelimiter = ':';\n\n\tlet millisec = date.getMilliseconds();\n\n\tif (millisec < 100)\n\t\tmillisec = '0' + pad(millisec);\n\n\treturn pad(date.getHours()) + delimiter + pad(date.getMinutes()) + delimiter + pad(date.getSeconds()) + delimiter + millisec;\n}\n\n//function colorize(color, text) {\n//\treturn `\\u001b[3${color};1m${text}\\u001b[0m`;\n//}\n\nfunction getColor(level) {\n\tswitch (level) {\n\t\t// case 'info':\n\t\t// \treturn color.cyan;\n\t\t// case 'debug':\n\t\t// \treturn color.green;\n\t\t// case 'warn':\n\t\t// \treturn color.yellow;\n\t\tcase 'error':\n\t\t\treturn color.red;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n}\n\n\n// let maxCategoryLength = 0;\n\nlet log = {\n\tdebug: debug('debug'),\n\tinfo: debug('info'),\n\twarn: debug('warn'),\n\terror: debug('error')\n};\n\nclass Writeln {\n\tconstructor(category) {\n\t\tthis.category = category;\n\t\t// this.history = [];\n\t\tthis.category = this.formatCategory();\n\t}\n\n\tinfo(text, metadata) {\n\t\tthis.write('info', text, metadata);\n\t}\n\n\twarn(text, metadata) {\n\t\tthis.write('warn', text, metadata);\n\t}\n\n\tdebug(text, metadata) {\n\t\tthis.write('debug', text, metadata);\n\t}\n\n\terror(text, metadata) {\n\t\tthis.write('error', text, metadata);\n\t}\n\n\twrite(level, text, metadata) {\n\t\tlet now = new Date();\n\t\tlet date = dateStr(now, '-');\n\t\tlet time = timeStr(now);\n\t\tlet timestamp = `${date} ${time}`;\n\t\tlet mtext = '';\n\n\t\tlet color = getColor(level);\n\n\t\tif (color)\n\t\t\tlog.color = color;\n\n\t\tif (metadata) {\n\t\t\tif (typeof(metadata) !== 'string') {\n\t\t\t\tmtext = '\\n' + chalk.dim(util.inspect(metadata, { showHidden: true, depth: null, colors: true })) + '\\n';\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmtext = `${metadata}`;\n\t\t\t}\n\n\t\t\tmtext = mtext.replace(/\\n/g, '\\n  ');\n\t\t}\n\n\t\tlog[level](`${chalk.dim(this.category)} ${text}`, chalk.dim(timestamp), mtext);\n\n\t\t// this.history.push(text);\n\t}\n\n\t// repeatHistory() {\n\t// \tlet str = '';\n\t//\n\t// \tfor (let i = 0, len = this.history.length; i < len; i++) {\n\t// \t\tstr += this.history[i];\n\t// \t}\n\t//\n\t// \treturn str;\n\t// }\n\n\tformatCategory() {\n\t\tlet str = this.category.replace(/ /g, '-').toLowerCase();\n\t\t// let len = 2 + str.length;\n\t\t//\n\t\t// if (len >= maxCategoryLength) {\n\t\t// \tmaxCategoryLength = len;\n\t\t// }\n\t\t// else {\n\t\t// \tstr += pad('', maxCategoryLength - len, ' ');\n\t\t// }\n\n\t\treturn str;\n\t}\n}\n\nmodule.exports = Writeln;"]}